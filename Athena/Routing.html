<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.34.0">
<meta name="crystal_docs.project_version" content="0.10.0">
<meta name="crystal_docs.project_name" content="athena">


<link href="../css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../js/doc.js"></script>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>

  <meta id="repository-name" content="athena">
  <title>Athena::Routing - athena 0.10.0</title>
  <script type="text/javascript">
    CrystalDocs.base_path = "../";
  </script>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="../index.html">
          athena
        </a>
      </h1>

      <span class="project-version">
        0.10.0
      </span>
    </div>
  </div>

  <div class="search-results" class="hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class=" " data-id="athena/ACF" data-name="acf">
      <a href="../ACF.html">ACF</a>
      
    </li>
  
  <li class=" " data-id="athena/ADI" data-name="adi">
      <a href="../ADI.html">ADI</a>
      
    </li>
  
  <li class=" " data-id="athena/AED" data-name="aed">
      <a href="../AED.html">AED</a>
      
    </li>
  
  <li class=" " data-id="athena/ART" data-name="art">
      <a href="../ART.html">ART</a>
      
    </li>
  
  <li class=" " data-id="athena/ASR" data-name="asr">
      <a href="../ASR.html">ASR</a>
      
    </li>
  
  <li class=" " data-id="athena/ASRA" data-name="asra">
      <a href="../ASRA.html">ASRA</a>
      
    </li>
  
  <li class="parent open current" data-id="athena/Athena" data-name="athena">
      <a href="../Athena.html">Athena</a>
      
        <ul>
  
  <li class="parent " data-id="athena/Athena/Config" data-name="athena::config">
      <a href="../Athena/Config.html">Config</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/Config/Base" data-name="athena::config::base">
      <a href="../Athena/Config/Base.html">Base</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Config/Configuration" data-name="athena::config::configuration">
      <a href="../Athena/Config/Configuration.html">Configuration</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Config/ConfigurationResolver" data-name="athena::config::configurationresolver">
      <a href="../Athena/Config/ConfigurationResolver.html">ConfigurationResolver</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Config/ConfigurationResolverInterface" data-name="athena::config::configurationresolverinterface">
      <a href="../Athena/Config/ConfigurationResolverInterface.html">ConfigurationResolverInterface</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena/Athena/DependencyInjection" data-name="athena::dependencyinjection">
      <a href="../Athena/DependencyInjection.html">DependencyInjection</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/DependencyInjection/Inject" data-name="athena::dependencyinjection::inject">
      <a href="../Athena/DependencyInjection/Inject.html">Inject</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/DependencyInjection/Register" data-name="athena::dependencyinjection::register">
      <a href="../Athena/DependencyInjection/Register.html">Register</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/DependencyInjection/ServiceContainer" data-name="athena::dependencyinjection::servicecontainer">
      <a href="../Athena/DependencyInjection/ServiceContainer.html">ServiceContainer</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena/Athena/EventDispatcher" data-name="athena::eventdispatcher">
      <a href="../Athena/EventDispatcher.html">EventDispatcher</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/EventDispatcher/Event" data-name="athena::eventdispatcher::event">
      <a href="../Athena/EventDispatcher/Event.html">Event</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/EventDispatcher/EventDispatcher" data-name="athena::eventdispatcher::eventdispatcher">
      <a href="../Athena/EventDispatcher/EventDispatcher.html">EventDispatcher</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/EventDispatcher/EventDispatcherInterface" data-name="athena::eventdispatcher::eventdispatcherinterface">
      <a href="../Athena/EventDispatcher/EventDispatcherInterface.html">EventDispatcherInterface</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/EventDispatcher/EventListener" data-name="athena::eventdispatcher::eventlistener">
      <a href="../Athena/EventDispatcher/EventListener.html">EventListener</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/EventDispatcher/EventListenerInterface" data-name="athena::eventdispatcher::eventlistenerinterface">
      <a href="../Athena/EventDispatcher/EventListenerInterface.html">EventListenerInterface</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/EventDispatcher/EventListenerType" data-name="athena::eventdispatcher::eventlistenertype">
      <a href="../Athena/EventDispatcher/EventListenerType.html">EventListenerType</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/EventDispatcher/StoppableEvent" data-name="athena::eventdispatcher::stoppableevent">
      <a href="../Athena/EventDispatcher/StoppableEvent.html">StoppableEvent</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/EventDispatcher/SubscribedEvents" data-name="athena::eventdispatcher::subscribedevents">
      <a href="../Athena/EventDispatcher/SubscribedEvents.html">SubscribedEvents</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent open current" data-id="athena/Athena/Routing" data-name="athena::routing">
      <a href="../Athena/Routing.html">Routing</a>
      
        <ul>
  
  <li class="parent " data-id="athena/Athena/Routing/Action" data-name="athena::routing::action(controller, actiontype, returntype, argtypetuple, argumentstype)">
      <a href="../Athena/Routing/Action.html">Action</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/Routing/Action/View" data-name="athena::routing::action::view">
      <a href="../Athena/Routing/Action/View.html">View</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/ActionBase" data-name="athena::routing::actionbase">
      <a href="../Athena/Routing/ActionBase.html">ActionBase</a>
      
    </li>
  
  <li class="parent " data-id="athena/Athena/Routing/Arguments" data-name="athena::routing::arguments">
      <a href="../Athena/Routing/Arguments.html">Arguments</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/Routing/Arguments/ArgumentMetadata" data-name="athena::routing::arguments::argumentmetadata(t)">
      <a href="../Athena/Routing/Arguments/ArgumentMetadata.html">ArgumentMetadata</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Arguments/ArgumentResolver" data-name="athena::routing::arguments::argumentresolver">
      <a href="../Athena/Routing/Arguments/ArgumentResolver.html">ArgumentResolver</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Arguments/ArgumentResolverInterface" data-name="athena::routing::arguments::argumentresolverinterface">
      <a href="../Athena/Routing/Arguments/ArgumentResolverInterface.html">ArgumentResolverInterface</a>
      
    </li>
  
  <li class="parent " data-id="athena/Athena/Routing/Arguments/Resolvers" data-name="athena::routing::arguments::resolvers">
      <a href="../Athena/Routing/Arguments/Resolvers.html">Resolvers</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/Routing/Arguments/Resolvers/ArgumentValueResolverInterface" data-name="athena::routing::arguments::resolvers::argumentvalueresolverinterface">
      <a href="../Athena/Routing/Arguments/Resolvers/ArgumentValueResolverInterface.html">ArgumentValueResolverInterface</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Arguments/Resolvers/DefaultValue" data-name="athena::routing::arguments::resolvers::defaultvalue">
      <a href="../Athena/Routing/Arguments/Resolvers/DefaultValue.html">DefaultValue</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Arguments/Resolvers/Request" data-name="athena::routing::arguments::resolvers::request">
      <a href="../Athena/Routing/Arguments/Resolvers/Request.html">Request</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Arguments/Resolvers/RequestAttribute" data-name="athena::routing::arguments::resolvers::requestattribute">
      <a href="../Athena/Routing/Arguments/Resolvers/RequestAttribute.html">RequestAttribute</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena/Athena/Routing/Config" data-name="athena::routing::config">
      <a href="../Athena/Routing/Config.html">Config</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/Routing/Config/CORS" data-name="athena::routing::config::cors">
      <a href="../Athena/Routing/Config/CORS.html">CORS</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Controller" data-name="athena::routing::controller">
      <a href="../Athena/Routing/Controller.html">Controller</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Delete" data-name="athena::routing::delete">
      <a href="../Athena/Routing/Delete.html">Delete</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/ErrorRenderer" data-name="athena::routing::errorrenderer">
      <a href="../Athena/Routing/ErrorRenderer.html">ErrorRenderer</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/ErrorRendererInterface" data-name="athena::routing::errorrendererinterface">
      <a href="../Athena/Routing/ErrorRendererInterface.html">ErrorRendererInterface</a>
      
    </li>
  
  <li class="parent " data-id="athena/Athena/Routing/Events" data-name="athena::routing::events">
      <a href="../Athena/Routing/Events.html">Events</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/Routing/Events/Exception" data-name="athena::routing::events::exception">
      <a href="../Athena/Routing/Events/Exception.html">Exception</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Events/Request" data-name="athena::routing::events::request">
      <a href="../Athena/Routing/Events/Request.html">Request</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Events/RequestAware" data-name="athena::routing::events::requestaware">
      <a href="../Athena/Routing/Events/RequestAware.html">RequestAware</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Events/Response" data-name="athena::routing::events::response">
      <a href="../Athena/Routing/Events/Response.html">Response</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Events/SettableResponse" data-name="athena::routing::events::settableresponse">
      <a href="../Athena/Routing/Events/SettableResponse.html">SettableResponse</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Events/Terminate" data-name="athena::routing::events::terminate">
      <a href="../Athena/Routing/Events/Terminate.html">Terminate</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Events/View" data-name="athena::routing::events::view">
      <a href="../Athena/Routing/Events/View.html">View</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena/Athena/Routing/Exceptions" data-name="athena::routing::exceptions">
      <a href="../Athena/Routing/Exceptions.html">Exceptions</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/BadGateway" data-name="athena::routing::exceptions::badgateway">
      <a href="../Athena/Routing/Exceptions/BadGateway.html">BadGateway</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/BadRequest" data-name="athena::routing::exceptions::badrequest">
      <a href="../Athena/Routing/Exceptions/BadRequest.html">BadRequest</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/Conflict" data-name="athena::routing::exceptions::conflict">
      <a href="../Athena/Routing/Exceptions/Conflict.html">Conflict</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/Forbidden" data-name="athena::routing::exceptions::forbidden">
      <a href="../Athena/Routing/Exceptions/Forbidden.html">Forbidden</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/Gone" data-name="athena::routing::exceptions::gone">
      <a href="../Athena/Routing/Exceptions/Gone.html">Gone</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/HTTPException" data-name="athena::routing::exceptions::httpexception">
      <a href="../Athena/Routing/Exceptions/HTTPException.html">HTTPException</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/LengthRequired" data-name="athena::routing::exceptions::lengthrequired">
      <a href="../Athena/Routing/Exceptions/LengthRequired.html">LengthRequired</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/MethodNotAllowed" data-name="athena::routing::exceptions::methodnotallowed">
      <a href="../Athena/Routing/Exceptions/MethodNotAllowed.html">MethodNotAllowed</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/NotAcceptable" data-name="athena::routing::exceptions::notacceptable">
      <a href="../Athena/Routing/Exceptions/NotAcceptable.html">NotAcceptable</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/NotFound" data-name="athena::routing::exceptions::notfound">
      <a href="../Athena/Routing/Exceptions/NotFound.html">NotFound</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/NotImplemented" data-name="athena::routing::exceptions::notimplemented">
      <a href="../Athena/Routing/Exceptions/NotImplemented.html">NotImplemented</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/PreconditionFailed" data-name="athena::routing::exceptions::preconditionfailed">
      <a href="../Athena/Routing/Exceptions/PreconditionFailed.html">PreconditionFailed</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/ServiceUnavailable" data-name="athena::routing::exceptions::serviceunavailable">
      <a href="../Athena/Routing/Exceptions/ServiceUnavailable.html">ServiceUnavailable</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/TooManyRequests" data-name="athena::routing::exceptions::toomanyrequests">
      <a href="../Athena/Routing/Exceptions/TooManyRequests.html">TooManyRequests</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/Unauthorized" data-name="athena::routing::exceptions::unauthorized">
      <a href="../Athena/Routing/Exceptions/Unauthorized.html">Unauthorized</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/UnprocessableEntity" data-name="athena::routing::exceptions::unprocessableentity">
      <a href="../Athena/Routing/Exceptions/UnprocessableEntity.html">UnprocessableEntity</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Exceptions/UnsupportedMediaType" data-name="athena::routing::exceptions::unsupportedmediatype">
      <a href="../Athena/Routing/Exceptions/UnsupportedMediaType.html">UnsupportedMediaType</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Get" data-name="athena::routing::get">
      <a href="../Athena/Routing/Get.html">Get</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Link" data-name="athena::routing::link">
      <a href="../Athena/Routing/Link.html">Link</a>
      
    </li>
  
  <li class="parent " data-id="athena/Athena/Routing/Listeners" data-name="athena::routing::listeners">
      <a href="../Athena/Routing/Listeners.html">Listeners</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/Routing/Listeners/CORS" data-name="athena::routing::listeners::cors">
      <a href="../Athena/Routing/Listeners/CORS.html">CORS</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Listeners/Error" data-name="athena::routing::listeners::error">
      <a href="../Athena/Routing/Listeners/Error.html">Error</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Listeners/ParamConverter" data-name="athena::routing::listeners::paramconverter">
      <a href="../Athena/Routing/Listeners/ParamConverter.html">ParamConverter</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Listeners/Routing" data-name="athena::routing::listeners::routing">
      <a href="../Athena/Routing/Listeners/Routing.html">Routing</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Listeners/View" data-name="athena::routing::listeners::view">
      <a href="../Athena/Routing/Listeners/View.html">View</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/ParamConverter" data-name="athena::routing::paramconverter">
      <a href="../Athena/Routing/ParamConverter.html">ParamConverter</a>
      
    </li>
  
  <li class="parent " data-id="athena/Athena/Routing/ParamConverterInterface" data-name="athena::routing::paramconverterinterface">
      <a href="../Athena/Routing/ParamConverterInterface.html">ParamConverterInterface</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/Routing/ParamConverterInterface/Configuration" data-name="athena::routing::paramconverterinterface::configuration">
      <a href="../Athena/Routing/ParamConverterInterface/Configuration.html">Configuration</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/ParamConverterInterface/ConfigurationInterface" data-name="athena::routing::paramconverterinterface::configurationinterface">
      <a href="../Athena/Routing/ParamConverterInterface/ConfigurationInterface.html">ConfigurationInterface</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/ParameterBag" data-name="athena::routing::parameterbag">
      <a href="../Athena/Routing/ParameterBag.html">ParameterBag</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Patch" data-name="athena::routing::patch">
      <a href="../Athena/Routing/Patch.html">Patch</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Post" data-name="athena::routing::post">
      <a href="../Athena/Routing/Post.html">Post</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Prefix" data-name="athena::routing::prefix">
      <a href="../Athena/Routing/Prefix.html">Prefix</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Put" data-name="athena::routing::put">
      <a href="../Athena/Routing/Put.html">Put</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/QueryParam" data-name="athena::routing::queryparam">
      <a href="../Athena/Routing/QueryParam.html">QueryParam</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/RedirectResponse" data-name="athena::routing::redirectresponse">
      <a href="../Athena/Routing/RedirectResponse.html">RedirectResponse</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/RequestStore" data-name="athena::routing::requeststore">
      <a href="../Athena/Routing/RequestStore.html">RequestStore</a>
      
    </li>
  
  <li class="parent " data-id="athena/Athena/Routing/Response" data-name="athena::routing::response">
      <a href="../Athena/Routing/Response.html">Response</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/Routing/Response/DirectWriter" data-name="athena::routing::response::directwriter">
      <a href="../Athena/Routing/Response/DirectWriter.html">DirectWriter</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Response/Writer" data-name="athena::routing::response::writer">
      <a href="../Athena/Routing/Response/Writer.html">Writer</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Route" data-name="athena::routing::route">
      <a href="../Athena/Routing/Route.html">Route</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/RouteHandler" data-name="athena::routing::routehandler">
      <a href="../Athena/Routing/RouteHandler.html">RouteHandler</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/RouteResolver" data-name="athena::routing::routeresolver">
      <a href="../Athena/Routing/RouteResolver.html">RouteResolver</a>
      
    </li>
  
  <li class="parent " data-id="athena/Athena/Routing/TimeConverter" data-name="athena::routing::timeconverter">
      <a href="../Athena/Routing/TimeConverter.html">TimeConverter</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/Routing/TimeConverter/Configuration" data-name="athena::routing::timeconverter::configuration">
      <a href="../Athena/Routing/TimeConverter/Configuration.html">Configuration</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/Unlink" data-name="athena::routing::unlink">
      <a href="../Athena/Routing/Unlink.html">Unlink</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Routing/View" data-name="athena::routing::view">
      <a href="../Athena/Routing/View.html">View</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="athena/Athena/Serializer" data-name="athena::serializer">
      <a href="../Athena/Serializer.html">Serializer</a>
      
        <ul>
  
  <li class="parent " data-id="athena/Athena/Serializer/Annotations" data-name="athena::serializer::annotations">
      <a href="../Athena/Serializer/Annotations.html">Annotations</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/Accessor" data-name="athena::serializer::annotations::accessor">
      <a href="../Athena/Serializer/Annotations/Accessor.html">Accessor</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/AccessorOrder" data-name="athena::serializer::annotations::accessororder">
      <a href="../Athena/Serializer/Annotations/AccessorOrder.html">AccessorOrder</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/Discriminator" data-name="athena::serializer::annotations::discriminator">
      <a href="../Athena/Serializer/Annotations/Discriminator.html">Discriminator</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/Exclude" data-name="athena::serializer::annotations::exclude">
      <a href="../Athena/Serializer/Annotations/Exclude.html">Exclude</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/ExclusionPolicy" data-name="athena::serializer::annotations::exclusionpolicy">
      <a href="../Athena/Serializer/Annotations/ExclusionPolicy.html">ExclusionPolicy</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/Expose" data-name="athena::serializer::annotations::expose">
      <a href="../Athena/Serializer/Annotations/Expose.html">Expose</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/Groups" data-name="athena::serializer::annotations::groups">
      <a href="../Athena/Serializer/Annotations/Groups.html">Groups</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/IgnoreOnDeserialize" data-name="athena::serializer::annotations::ignoreondeserialize">
      <a href="../Athena/Serializer/Annotations/IgnoreOnDeserialize.html">IgnoreOnDeserialize</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/IgnoreOnSerialize" data-name="athena::serializer::annotations::ignoreonserialize">
      <a href="../Athena/Serializer/Annotations/IgnoreOnSerialize.html">IgnoreOnSerialize</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/Name" data-name="athena::serializer::annotations::name">
      <a href="../Athena/Serializer/Annotations/Name.html">Name</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/PostDeserialize" data-name="athena::serializer::annotations::postdeserialize">
      <a href="../Athena/Serializer/Annotations/PostDeserialize.html">PostDeserialize</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/PostSerialize" data-name="athena::serializer::annotations::postserialize">
      <a href="../Athena/Serializer/Annotations/PostSerialize.html">PostSerialize</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/PreSerialize" data-name="athena::serializer::annotations::preserialize">
      <a href="../Athena/Serializer/Annotations/PreSerialize.html">PreSerialize</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/ReadOnly" data-name="athena::serializer::annotations::readonly">
      <a href="../Athena/Serializer/Annotations/ReadOnly.html">ReadOnly</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/Since" data-name="athena::serializer::annotations::since">
      <a href="../Athena/Serializer/Annotations/Since.html">Since</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/Skip" data-name="athena::serializer::annotations::skip">
      <a href="../Athena/Serializer/Annotations/Skip.html">Skip</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/SkipWhenEmpty" data-name="athena::serializer::annotations::skipwhenempty">
      <a href="../Athena/Serializer/Annotations/SkipWhenEmpty.html">SkipWhenEmpty</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/Until" data-name="athena::serializer::annotations::until">
      <a href="../Athena/Serializer/Annotations/Until.html">Until</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Annotations/VirtualProperty" data-name="athena::serializer::annotations::virtualproperty">
      <a href="../Athena/Serializer/Annotations/VirtualProperty.html">VirtualProperty</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Any" data-name="athena::serializer::any">
      <a href="../Athena/Serializer/Any.html">Any</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Context" data-name="athena::serializer::context">
      <a href="../Athena/Serializer/Context.html">Context</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/DeserializationContext" data-name="athena::serializer::deserializationcontext">
      <a href="../Athena/Serializer/DeserializationContext.html">DeserializationContext</a>
      
    </li>
  
  <li class="parent " data-id="athena/Athena/Serializer/ExclusionStrategies" data-name="athena::serializer::exclusionstrategies">
      <a href="../Athena/Serializer/ExclusionStrategies.html">ExclusionStrategies</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/Serializer/ExclusionStrategies/Disjunct" data-name="athena::serializer::exclusionstrategies::disjunct">
      <a href="../Athena/Serializer/ExclusionStrategies/Disjunct.html">Disjunct</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/ExclusionStrategies/ExclusionStrategyInterface" data-name="athena::serializer::exclusionstrategies::exclusionstrategyinterface">
      <a href="../Athena/Serializer/ExclusionStrategies/ExclusionStrategyInterface.html">ExclusionStrategyInterface</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/ExclusionStrategies/Groups" data-name="athena::serializer::exclusionstrategies::groups">
      <a href="../Athena/Serializer/ExclusionStrategies/Groups.html">Groups</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/ExclusionStrategies/Version" data-name="athena::serializer::exclusionstrategies::version">
      <a href="../Athena/Serializer/ExclusionStrategies/Version.html">Version</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Format" data-name="athena::serializer::format">
      <a href="../Athena/Serializer/Format.html">Format</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/InstantiateObjectConstructor" data-name="athena::serializer::instantiateobjectconstructor">
      <a href="../Athena/Serializer/InstantiateObjectConstructor.html">InstantiateObjectConstructor</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Model" data-name="athena::serializer::model">
      <a href="../Athena/Serializer/Model.html">Model</a>
      
    </li>
  
  <li class="parent " data-id="athena/Athena/Serializer/Navigators" data-name="athena::serializer::navigators">
      <a href="../Athena/Serializer/Navigators.html">Navigators</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/Serializer/Navigators/DeserializationNavigator" data-name="athena::serializer::navigators::deserializationnavigator">
      <a href="../Athena/Serializer/Navigators/DeserializationNavigator.html">DeserializationNavigator</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Navigators/DeserializationNavigatorInterface" data-name="athena::serializer::navigators::deserializationnavigatorinterface">
      <a href="../Athena/Serializer/Navigators/DeserializationNavigatorInterface.html">DeserializationNavigatorInterface</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Navigators/NavigatorFactory" data-name="athena::serializer::navigators::navigatorfactory">
      <a href="../Athena/Serializer/Navigators/NavigatorFactory.html">NavigatorFactory</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Navigators/NavigatorFactoryInterface" data-name="athena::serializer::navigators::navigatorfactoryinterface">
      <a href="../Athena/Serializer/Navigators/NavigatorFactoryInterface.html">NavigatorFactoryInterface</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Navigators/SerializationNavigator" data-name="athena::serializer::navigators::serializationnavigator">
      <a href="../Athena/Serializer/Navigators/SerializationNavigator.html">SerializationNavigator</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Navigators/SerializationNavigatorInterface" data-name="athena::serializer::navigators::serializationnavigatorinterface">
      <a href="../Athena/Serializer/Navigators/SerializationNavigatorInterface.html">SerializationNavigatorInterface</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/ObjectConstructorInterface" data-name="athena::serializer::objectconstructorinterface">
      <a href="../Athena/Serializer/ObjectConstructorInterface.html">ObjectConstructorInterface</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/PropertyMetadata" data-name="athena::serializer::propertymetadata(ivartype, valuetype, classtype)">
      <a href="../Athena/Serializer/PropertyMetadata.html">PropertyMetadata</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/PropertyMetadataBase" data-name="athena::serializer::propertymetadatabase">
      <a href="../Athena/Serializer/PropertyMetadataBase.html">PropertyMetadataBase</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Serializable" data-name="athena::serializer::serializable">
      <a href="../Athena/Serializer/Serializable.html">Serializable</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/SerializationContext" data-name="athena::serializer::serializationcontext">
      <a href="../Athena/Serializer/SerializationContext.html">SerializationContext</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Serializer" data-name="athena::serializer::serializer">
      <a href="../Athena/Serializer/Serializer.html">Serializer</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/SerializerInterface" data-name="athena::serializer::serializerinterface">
      <a href="../Athena/Serializer/SerializerInterface.html">SerializerInterface</a>
      
    </li>
  
  <li class="parent " data-id="athena/Athena/Serializer/Visitors" data-name="athena::serializer::visitors">
      <a href="../Athena/Serializer/Visitors.html">Visitors</a>
      
        <ul>
  
  <li class=" " data-id="athena/Athena/Serializer/Visitors/DeserializationVisitor" data-name="athena::serializer::visitors::deserializationvisitor">
      <a href="../Athena/Serializer/Visitors/DeserializationVisitor.html">DeserializationVisitor</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Visitors/DeserializationVisitorInterface" data-name="athena::serializer::visitors::deserializationvisitorinterface">
      <a href="../Athena/Serializer/Visitors/DeserializationVisitorInterface.html">DeserializationVisitorInterface</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Visitors/JSONDeserializationVisitor" data-name="athena::serializer::visitors::jsondeserializationvisitor">
      <a href="../Athena/Serializer/Visitors/JSONDeserializationVisitor.html">JSONDeserializationVisitor</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Visitors/JSONSerializationVisitor" data-name="athena::serializer::visitors::jsonserializationvisitor">
      <a href="../Athena/Serializer/Visitors/JSONSerializationVisitor.html">JSONSerializationVisitor</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Visitors/SerializationVisitorInterface" data-name="athena::serializer::visitors::serializationvisitorinterface">
      <a href="../Athena/Serializer/Visitors/SerializationVisitorInterface.html">SerializationVisitorInterface</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Visitors/YAMLDeserializationVisitor" data-name="athena::serializer::visitors::yamldeserializationvisitor">
      <a href="../Athena/Serializer/Visitors/YAMLDeserializationVisitor.html">YAMLDeserializationVisitor</a>
      
    </li>
  
  <li class=" " data-id="athena/Athena/Serializer/Visitors/YAMLSerializationVisitor" data-name="athena::serializer::visitors::yamlserializationvisitor">
      <a href="../Athena/Serializer/Visitors/YAMLSerializationVisitor.html">YAMLSerializationVisitor</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">module</span> Athena::Routing

</h1>





  <h2>
    <a id="overview" class="anchor" href="#overview">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Overview
  </h2>

  <p>Athena is a set of independent, reusable <a href="https://github.com/athena-framework" target="_blank">components</a> with the goal of providing
a set of high quality, flexible, and robust framework building blocks.  These components could be used on their own,
or outside of the Athena ecosystem, to prevent every framework/project from needing to "reinvent the wheel."</p>

<p>The <code><a href="../Athena/Routing.html">Athena::Routing</a></code> component is the result of combining these components into a single robust, flexible, and self-contained framework.</p>

<h2><a id="getting-started" class="anchor" href="#getting-started">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Getting Started</h2>

<p>Athena does not have any other dependencies outside of <code>Crystal</code>/<code>Shards</code>.
It is designed in such a way to be non-intrusive, and not require a strict organizational convention in regards to how a project is setup;
this allows it to use a minimal amount of setup boilerplate while not preventing it for more complex projects.</p>

<h3><a id="installation" class="anchor" href="#installation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Installation</h3>

<p>Add the dependency to your <code>shard.yml</code>:</p>

<pre><code class="language-yaml">dependencies:
  athena:
    github: athena-framework/athena
    version: ~> 0.10.0</code></pre>

<p>Run <code>shards install</code>.  This will install Athena and its required dependencies.</p>

<h3><a id="usage" class="anchor" href="#usage">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Usage</h3>

<p>Athena has a goal of being easy to start using for simple use cases, while still allowing flexibility/customizability for larger more complex use cases.</p>

<h4><a id="routing" class="anchor" href="#routing">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Routing</h4>

<p>Athena is a MVC based framework, as such, the logic to handle a given route is defined in an <code><a href="../Athena/Routing/Controller.html">ART::Controller</a></code> class.</p>

<pre><code><span class="k">require</span> <span class="s">&quot;athena&quot;</span>

<span class="c"># Define a controller</span>
<span class="k">class</span> <span class="t">ExampleController</span> <span class="o">&lt;</span> <span class="t">ART</span><span class="t">::</span><span class="t">Controller</span>
  <span class="c"># Define an action to handle the related route</span>
  @[<span class="t">ART</span><span class="t">::</span><span class="t">Get</span>(<span class="s">&quot;/&quot;</span>)]
  <span class="k">def</span> <span class="m">index</span> : <span class="t">String</span>
    <span class="s">&quot;Hello World&quot;</span>
  <span class="k">end</span>

  <span class="c"># The macro DSL can also be used</span>
  get <span class="s">&quot;/&quot;</span> <span class="k">do</span>
    <span class="s">&quot;Hello World&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c"># Run the server</span>
<span class="t">ART</span>.run

<span class="c"># GET / # =&gt; Hello World</span></code></pre>

<p>Annotations applied to the methods are used to define the HTTP method this method handles, such as <code><a href="../Athena/Routing/Get.html">ART::Get</a></code> or <code><a href="../Athena/Routing/Post.html">ART::Post</a></code>.  A macro DSL also exists to make them a bit less verbose;
<code><a href="../Athena/Routing/Controller.html#get(path,*args,**named_args,&)-macro">ART::Controller.get</a></code> or <code><a href="../Athena/Routing/Controller.html#post(path,*args,**named_args,&)-macro">ART::Controller.post</a></code>.  The <code><a href="../Athena/Routing/Route.html">ART::Route</a></code> annotation can also be used to define custom <code>HTTP</code> methods.</p>

<p>Controllers are simply classes and routes are simply methods.  Controllers and actions can be documented/tested as you would any Crystal class/method.</p>

<h4><a id="route-parameters" class="anchor" href="#route-parameters">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Route Parameters</h4>

<p>Parameters, such as path/query parameters, are also defined via annotations and map directly to the method's arguments.</p>

<pre><code><span class="k">require</span> <span class="s">&quot;athena&quot;</span>

<span class="k">class</span> <span class="t">ExampleController</span> <span class="o">&lt;</span> <span class="t">ART</span><span class="t">::</span><span class="t">Controller</span>
  @[<span class="t">ART</span><span class="t">::</span><span class="t">QueryParam</span>(<span class="s">&quot;negative&quot;</span>)]
  @[<span class="t">ART</span><span class="t">::</span><span class="t">Get</span>(<span class="s">&quot;/add/:value1/:value2&quot;</span>)]
  <span class="k">def</span> <span class="m">add</span>(value1 : <span class="t">Int32</span>, value2 : <span class="t">Int32</span>, negative : <span class="t">Bool</span> <span class="o">=</span> <span class="n">false</span>) : <span class="t">Int32</span>
    sum <span class="o">=</span> value1 <span class="o">+</span> value2
    negative ? <span class="o">-</span>sum : sum
  <span class="k">end</span>
<span class="k">end</span>

<span class="t">ART</span>.run

<span class="c"># GET /add/2/3               # =&gt; 5</span>
<span class="c"># GET /add/5/5?negative=true # =&gt; -10</span>
<span class="c"># GET /add/foo/12            # =&gt; {&quot;code&quot;:422,&quot;message&quot;:&quot;Required parameter &#39;value1&#39; with value &#39;foo&#39; could not be converted into a valid &#39;Int32&#39;&quot;}</span></code></pre>

<p>Arguments are converted to their expected types if possible, otherwise an error response is automatically returned.
The values are provided directly as method arguments, thus preventing the need for <code>env.params.url["name"]</code> and any boilerplate related to it.
Just like normal methods arguments, default values can be defined. The method's return type adds some type safety to ensure the expected value is being returned.</p>

<p>Restricting an action argument to <code><a href="../HTTP/Request.html">HTTP::Request</a></code> will provide the raw request object, which can be used to retrieve the request data.
This approach is fine for simple or one-off endpoints, however for more complex/common request data processing, it is suggested to create
a <a href="./Routing.html#param-converters" target="_blank">Param Converter</a>.</p>

<pre><code><span class="k">require</span> <span class="s">&quot;athena&quot;</span>

<span class="k">class</span> <span class="t">ExampleController</span> <span class="o">&lt;</span> <span class="t">ART</span><span class="t">::</span><span class="t">Controller</span>
  @[<span class="t">ART</span><span class="t">::</span><span class="t">Post</span>(<span class="s">&quot;/data&quot;</span>)]
  <span class="k">def</span> <span class="m">data</span>(request : <span class="t">HTTP</span><span class="t">::</span><span class="t">Request</span>) : <span class="t">String</span>?
    request.body.try <span class="o">&amp;</span>.gets_to_end
  <span class="k">end</span>
<span class="k">end</span>

<span class="t">ART</span>.run

<span class="c"># POST /data body: &quot;foo--bar&quot; # =&gt; &quot;foo--bar&quot;</span></code></pre>

<p>An <code><a href="../Athena/Routing/Response.html">ART::Response</a></code> can also be used in order to fully customize the response, such as returning a specific status code, adding some one-off headers, or saving memory by directly
writing the response value to the Response IO.</p>

<pre><code><span class="k">require</span> <span class="s">&quot;athena&quot;</span>
<span class="k">require</span> <span class="s">&quot;mime&quot;</span>

<span class="k">class</span> <span class="t">ExampleController</span> <span class="o">&lt;</span> <span class="t">ART</span><span class="t">::</span><span class="t">Controller</span>
  <span class="c"># A GET endpoint returning an `ART::Response`.</span>
  @[<span class="t">ART</span><span class="t">::</span><span class="t">Get</span>(path: <span class="s">&quot;/css&quot;</span>)]
  <span class="k">def</span> <span class="m">css</span> : <span class="t">ART</span><span class="t">::</span><span class="t">Response</span>
    <span class="t">ART</span><span class="t">::</span><span class="t">Response</span>.<span class="k">new</span> <span class="s">&quot;.some_class { color: blue; }&quot;</span>, headers: <span class="t">HTTP</span><span class="t">::</span><span class="t">Headers</span>{<span class="s">&quot;content-type&quot;</span> => <span class="t">MIME</span>.from_extension(<span class="s">&quot;.css&quot;</span>)}
  <span class="k">end</span>
<span class="k">end</span>

<span class="t">ART</span>.run

<span class="c"># GET /css # =&gt; &quot;.some_class { color: blue; }&quot;</span></code></pre>

<p>An <code><a href="../Athena/Routing/Events/View.html">ART::Events::View</a></code> is emitted if the returned value is <em>NOT</em> an <code><a href="../Athena/Routing/Response.html">ART::Response</a></code>.  By default, non <code><a href="../Athena/Routing/Response.html">ART::Response</a></code>s are JSON serialized.
However, this event can be listened on to customize how the value is serialized.</p>

<h4><a id="error-handling" class="anchor" href="#error-handling">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Error Handling</h4>

<p>Exception handling in Athena is similar to exception handling in any Crystal program, with the addition of a new unique exception type, <code><a href="../Athena/Routing/Exceptions/HTTPException.html">ART::Exceptions::HTTPException</a></code>.
Custom <code>HTTP</code> errors can also be defined by inheriting from <code><a href="../Athena/Routing/Exceptions/HTTPException.html">ART::Exceptions::HTTPException</a></code> or a child type.
A use case for this could be allowing additional data/context to be included within the exception.</p>

<p>Non <code><a href="../Athena/Routing/Exceptions/HTTPException.html">ART::Exceptions::HTTPException</a></code> exceptions are represented as a <code>500 Internal Server Error</code>.</p>

<p>When an exception is raised, Athena emits the <code><a href="../Athena/Routing/Events/Exception.html">ART::Events::Exception</a></code> event to allow an opportunity for it to be handled.
By default these exceptions will return a <code>JSON</code> serialized version of the exception, via <code><a href="../Athena/Routing/ErrorRenderer.html">ART::ErrorRenderer</a></code>, that includes the message and code; with the proper response status set.
If the exception goes unhandled, i.e. no listener set an <code><a href="../Athena/Routing/Response.html">ART::Response</a></code> on the event, then the request is finished and the exception is reraised.</p>

<pre><code><span class="k">require</span> <span class="s">&quot;athena&quot;</span>

<span class="k">class</span> <span class="t">ExampleController</span> <span class="o">&lt;</span> <span class="t">ART</span><span class="t">::</span><span class="t">Controller</span>
  get <span class="s">&quot;divide/:num1/:num2&quot;</span>, num1 : <span class="t">Int32</span>, num2 : <span class="t">Int32</span>, return_type: <span class="t">Int32</span> <span class="k">do</span>
    num1 <span class="o">//</span> num2
  <span class="k">end</span>

  get <span class="s">&quot;divide_rescued/:num1/:num2&quot;</span>, num1 : <span class="t">Int32</span>, num2 : <span class="t">Int32</span>, return_type: <span class="t">Int32</span> <span class="k">do</span>
    num1 <span class="o">//</span> num2
    <span class="c"># Rescue a non `ART::Exceptions::HTTPException`</span>
  <span class="k">rescue</span> ex : <span class="t">DivisionByZeroError</span>
    <span class="c"># in order to raise an `ART::Exceptions::HTTPException` to provide a better error message to the client.</span>
    raise <span class="t">ART</span><span class="t">::</span><span class="t">Exceptions</span><span class="t">::</span><span class="t">BadRequest</span>.<span class="k">new</span> <span class="s">&quot;Invalid num2:  Cannot divide by zero&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="t">ART</span>.run

<span class="c"># GET /divide/10/0 # =&gt; {&quot;code&quot;:500,&quot;message&quot;:&quot;Internal Server Error&quot;}</span>
<span class="c"># GET /divide_rescued/10/0 # =&gt; {&quot;code&quot;:400,&quot;message&quot;:&quot;Invalid num2:  Cannot divide by zero&quot;}</span></code></pre>

<h3><a id="advanced-usage" class="anchor" href="#advanced-usage">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Advanced Usage</h3>

<p>Athena also ships with some more advanced features to provide more flexibility/control for an application.
These features may not be required for a simple application; however as the application grows they may become more useful.</p>

<h4><a id="param-converters" class="anchor" href="#param-converters">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Param Converters</h4>

<p><code><a href="../Athena/Routing/ParamConverterInterface.html">ART::ParamConverterInterface</a></code>s allow complex types to be supplied to an action via its arguments.
An example of this could be extracting the id from <code>/users/10</code>, doing a DB query to lookup the user with the PK of <code>10</code>, then providing the full user object to the action.
Param converters abstract any custom parameter handling that would otherwise have to be done in each action.</p>

<pre><code><span class="k">require</span> <span class="s">&quot;athena&quot;</span>

@[<span class="t">ADI</span><span class="t">::</span><span class="t">Register</span>]
<span class="k">struct</span> <span class="t">MultiplyConverter</span> <span class="o">&lt;</span> <span class="t">ART</span><span class="t">::</span><span class="t">ParamConverterInterface</span>
  <span class="c"># :inherit:</span>
  <span class="k">def</span> <span class="m">apply</span>(request : <span class="t">HTTP</span><span class="t">::</span><span class="t">Request</span>, configuration : <span class="t">Configuration</span>) : <span class="t">Nil</span>
    arg_name <span class="o">=</span> configuration.name

    <span class="k">return</span> <span class="k">unless</span> request.attributes.has? arg_name

    value <span class="o">=</span> request.attributes.get arg_name, <span class="t">Int32</span>
    request.attributes.set arg_name, value <span class="o">*</span> <span class="n">2</span>, <span class="t">Int32</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="t">ParamConverterController</span> <span class="o">&lt;</span> <span class="t">ART</span><span class="t">::</span><span class="t">Controller</span>
  @[<span class="t">ART</span><span class="t">::</span><span class="t">Get</span>(path: <span class="s">&quot;/multiply/:num&quot;</span>)]
  @[<span class="t">ART</span><span class="t">::</span><span class="t">ParamConverter</span>(<span class="s">&quot;num&quot;</span>, converter: <span class="t">MultiplyConverter</span>)]
  <span class="k">def</span> <span class="m">multiply</span>(num : <span class="t">Int32</span>) : <span class="t">Int32</span>
    num
  <span class="k">end</span>
<span class="k">end</span>

<span class="t">ART</span>.run

<span class="c"># GET / multiply/3 # =&gt; 6</span></code></pre>

<h4><a id="middleware" class="anchor" href="#middleware">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Middleware</h4>

<p>Athena is an event based framework; meaning it emits <code><a href="../Athena/Routing/Events.html">ART::Events</a></code> that are acted upon internally to handle the request.
These same events can also be listened on by custom listeners, via <code><a href="../Athena/EventDispatcher/EventListenerInterface.html">AED::EventListenerInterface</a></code>, in order to tap into the life-cycle of the request.
An example use case of this could be: adding common headers, cookies, compressing the response, authentication, or even returning a response early like <code><a href="../Athena/Routing/Listeners/CORS.html">ART::Listeners::CORS</a></code>.</p>

<pre><code><span class="k">require</span> <span class="s">&quot;athena&quot;</span>

@[<span class="t">ADI</span><span class="t">::</span><span class="t">Register</span>]
<span class="k">struct</span> <span class="t">CustomListener</span>
  <span class="k">include</span> <span class="t">AED</span><span class="t">::</span><span class="t">EventListenerInterface</span>

  <span class="c"># Specify that we want to listen on the `Response` event.</span>
  <span class="c"># The value of the hash represents this listener&#39;s priority;</span>
  <span class="c"># the higher the value the sooner it gets executed.</span>
  <span class="k">def</span> <span class="m">self</span>.subscribed_events : <span class="t">AED</span><span class="t">::</span><span class="t">SubscribedEvents</span>
    <span class="t">AED</span><span class="t">::</span><span class="t">SubscribedEvents</span>{
      <span class="t">ART</span><span class="t">::</span><span class="t">Events</span><span class="t">::</span><span class="t">Response</span> => <span class="n">25</span>,
    }
  <span class="k">end</span>

  <span class="k">def</span> <span class="m">call</span>(event : <span class="t">ART</span><span class="t">::</span><span class="t">Events</span><span class="t">::</span><span class="t">Response</span>, dispatcher : <span class="t">AED</span><span class="t">::</span><span class="t">EventDispatcherInterface</span>) : <span class="t">Nil</span>
    event.response.headers[<span class="s">&quot;FOO&quot;</span>] <span class="o">=</span> <span class="s">&quot;BAR&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="t">ExampleController</span> <span class="o">&lt;</span> <span class="t">ART</span><span class="t">::</span><span class="t">Controller</span>
  get <span class="s">&quot;/&quot;</span> <span class="k">do</span>
    <span class="s">&quot;Hello World&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="t">ART</span>.run

<span class="c"># GET / # =&gt; Hello World (with `FOO =&gt; BAR` header)</span></code></pre>

<h4><a id="dependency-injection" class="anchor" href="#dependency-injection">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Dependency Injection</h4>

<p>Athena utilizes <code><a href="../Athena/DependencyInjection.html">Athena::DependencyInjection</a></code> to provide a service container layer.
DI allows controllers/other services to be decoupled from specific implementations.
This makes testing easier as test implementations of the dependencies can be used.</p>

<p>In Athena, most everything is a service that belongs to the container, which is unique to the current request.  The major benefit of this is it allows various types to be shared amongst the services.
For example, allowing param converters, controllers, etc. to have access to the current request via the <code><a href="../Athena/Routing/RequestStore.html">ART::RequestStore</a></code> service.</p>

<p>Another example would be defining a service to store a <code>UUID</code> to represent the current request, then using this service to include the UUID in the response headers.</p>

<pre><code><span class="k">require</span> <span class="s">&quot;athena&quot;</span>
<span class="k">require</span> <span class="s">&quot;uuid&quot;</span>

@[<span class="t">ADI</span><span class="t">::</span><span class="t">Register</span>]
<span class="k">struct</span> <span class="t">RequestIDStore</span>
  <span class="t">HEADER_NAME</span> <span class="o">=</span> <span class="s">&quot;X-Request-ID&quot;</span>

  <span class="c"># Inject `ART::RequestStore` in order to have access to the current request&#39;s headers.</span>
  <span class="k">def</span> <span class="m">initialize</span>(@request_store : <span class="t">ART</span><span class="t">::</span><span class="t">RequestStore</span>); <span class="k">end</span>

  property request_id : <span class="t">String</span>? <span class="o">=</span> <span class="n">nil</span> <span class="k">do</span>
    <span class="c"># Check the request store for a request.</span>
    request <span class="o">=</span> @request_store.request?

    <span class="c"># If there is a request and it has the Header,</span>
    <span class="k">if</span> request && request.headers.has_key? <span class="t">HEADER_NAME</span>
      <span class="c"># use that ID.</span>
      request.headers[<span class="t">HEADER_NAME</span>]
    <span class="k">else</span>
      <span class="c"># otherwise generate a new one.</span>
      <span class="t">UUID</span>.random.to_s
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

@[<span class="t">ADI</span><span class="t">::</span><span class="t">Register</span>]
<span class="k">struct</span> <span class="t">RequestIDListener</span>
  <span class="k">include</span> <span class="t">AED</span><span class="t">::</span><span class="t">EventListenerInterface</span>

  <span class="k">def</span> <span class="m">self</span>.subscribed_events : <span class="t">AED</span><span class="t">::</span><span class="t">SubscribedEvents</span>
    <span class="t">AED</span><span class="t">::</span><span class="t">SubscribedEvents</span>{
      <span class="t">ART</span><span class="t">::</span><span class="t">Events</span><span class="t">::</span><span class="t">Response</span> => <span class="n">0</span>,
    }
  <span class="k">end</span>

  <span class="k">def</span> <span class="m">initialize</span>(@request_id_store : <span class="t">RequestIDStore</span>); <span class="k">end</span>

  <span class="k">def</span> <span class="m">call</span>(event : <span class="t">ART</span><span class="t">::</span><span class="t">Events</span><span class="t">::</span><span class="t">Response</span>, dispatcher : <span class="t">AED</span><span class="t">::</span><span class="t">EventDispatcherInterface</span>) : <span class="t">Nil</span>
    <span class="c"># Set the request ID as a response header</span>
    event.response.headers[<span class="t">RequestIDStore</span><span class="t">::</span><span class="t">HEADER_NAME</span>] <span class="o">=</span> @request_id_store.request_id
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="t">ExampleController</span> <span class="o">&lt;</span> <span class="t">ART</span><span class="t">::</span><span class="t">Controller</span>
  get <span class="s">&quot;/&quot;</span> <span class="k">do</span>
    <span class="s">&quot;&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="t">ART</span>.run

<span class="c"># GET / # =&gt; (`X-Request-ID =&gt; 07bda224-fb1d-4b82-b26c-19d46305c7bc` header)</span></code></pre>

<p>The main benefit of having <code>RequestIDStore</code> and not doing <code>event.response.headers[RequestIDStore::HEADER_NAME] = UUID.random.to_s</code> directly is that the value could be used in other places.
Say for example you have a route that enqueues messages to be processed asynchronously.  The <code>RequestIDStore</code> could be inject into that controller/service in order to include the same <code>UUID</code>
within the message in order to expand tracing to async contexts.  Without DI, like in other frameworks, there would not be an easy to way to share the same instance of an object between
different types.  It also wouldn't be easy to have access to data outside the request context.</p>

<p>DI is also what "wires" everything together.  For example, say there is an external shard that defines a listener.  All that would be required to use that listener is install and require the shard,
DI takes care of the rest.  This is much easier and more flexible than needing to update code to add a new <code>HTTP::Handler</code> instance to an array.</p>














  <h2>
    <a id="defined-in" class="anchor" href="#defined-in">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Defined in:
  </h2>
  



  
    <h2>
      <a id="constant-summary" class="anchor" href="#constant-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
      Constant Summary
    </h2>
  
  <dl>
    
      <dt class="entry-const" id="LOGGER">
        <strong>LOGGER</strong> = <code><span class="t">Log</span>.<span class="k">for</span>(<span class="s">&quot;athena.routing&quot;</span>)</code>
      </dt>
      
    
  </dl>





  <h2>
    <a id="class-method-summary" class="anchor" href="#class-method-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Class Method Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#run(port:Int32=3000,host:String=&quot;0.0.0.0&quot;,reuse_port:Bool=false):Nil-class-method" class="signature"><strong>.run</strong>(port : Int32 = <span class="n">3000</span>, host : String = <span class="s">&quot;0.0.0.0&quot;</span>, reuse_port : Bool = <span class="n">false</span>) : Nil</a>
        
          <div class="summary"><p>Runs an <code>HTTP::Server</code> listening on the given <em>port</em> and <em>host</em>.</p></div>
        
      </li>
    
  </ul>







<div class="methods-inherited">
  
</div>




  <h2>
    <a id="class-method-detail" class="anchor" href="#class-method-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Class Method Detail
  </h2>
  
    <div class="entry-detail" id="run(port:Int32=3000,host:String=&quot;0.0.0.0&quot;,reuse_port:Bool=false):Nil-class-method">
      <div class="signature">
        
        def self.<strong>run</strong>(port : Int32 = <span class="n">3000</span>, host : String = <span class="s">&quot;0.0.0.0&quot;</span>, reuse_port : Bool = <span class="n">false</span>) : Nil

        <a class="method-permalink" href="#run(port:Int32=3000,host:String=&quot;0.0.0.0&quot;,reuse_port:Bool=false):Nil-class-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Runs an <code>HTTP::Server</code> listening on the given <em>port</em> and <em>host</em>.</p>

<pre><code><span class="k">require</span> <span class="s">&quot;athena&quot;</span>

<span class="k">class</span> <span class="t">ExampleController</span> <span class="o">&lt;</span> <span class="t">ART</span><span class="t">::</span><span class="t">Controller</span>
  @[<span class="t">ART</span><span class="t">::</span><span class="t">Get</span>(<span class="s">&quot;/&quot;</span>)]
  <span class="k">def</span> <span class="m">root</span> : <span class="t">String</span>
    <span class="s">&quot;At the index&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="t">ART</span>.run</code></pre>

<p>See <code><a href="../Athena/Routing/Controller.html">ART::Controller</a></code> for more information on defining controllers/route actions.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  






</div>

</body>
</html>
